function renderRingkasan(list){
  const tbody=document.getElementById('absensi-ringkasan');
  tbody.innerHTML="";
  list.forEach(item=>{
    let hadir=item.siswa.filter(s=>s.status==="Hadir").length;
    let izin=item.siswa.filter(s=>s.status==="Izin").length;
    let sakit=item.siswa.filter(s=>s.status==="Sakit").length;
    let alpa=item.siswa.filter(s=>s.status==="Alpa").length;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><a href="absensi.html">${item.tanggal}</a></td>
                  <td>${hadir}</td><td>${izin}</td><td>${sakit}</td><td>${alpa}</td>`;
    tbody.appendChild(tr);
  });
}

// coba load dari data/absensi.json, kalau gagal pakai localStorage
fetch('data/absensi.json')
  .then(r=>r.json())
  .then(list=>renderRingkasan(list))
  .catch(()=>{
    let local=JSON.parse(localStorage.getItem('absensi'))||[];
    if(local.length>0) renderRingkasan(local);
  });
